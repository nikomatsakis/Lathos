package com.smallcultfollowing.lathos.server;

import java.util.ArrayList;
import java.util.List;

public class Node implements Displayable {
	
	public final String id;
	private final ArrayList<Displayable> contents = new ArrayList<Displayable>();
	private final ArrayList<Node> parents = new ArrayList<Node>();
	private final ArrayList<Node> children = new ArrayList<Node>();
	
	public Node(String id) {
		this.id = id;
	}
	
	public synchronized void addContents(List<Displayable> d) {
		contents.addAll(d);
	}

	public synchronized void addContent(Displayable d) {
		contents.add(d);
	}
	
	public void addParent(Node parent) {
		// Not performed atomically, but not really a big deal.
		synchronized(this) {
			parents.add(parent);
		}
		synchronized(parent) {
			parent.children.add(this);
		}
	}
	
	public void addParents(List<Node> parents) {
		for(Node parent : parents) addParent(parent);
	}
	
	public void addChild(Node child) {
		child.addParent(this);
	}
	
	@Override
	public synchronized void toHtml(Render render, StringBuilder sb) {
		for(Displayable d : contents)
			d.toHtml(render, sb);
	}

}
